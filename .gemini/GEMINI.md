# GEMINI.md

## 開発哲学

### テスト駆動開発 (TDD)

- **t-wadaの推奨する進め方に従ってください**

- 原則としてテスト駆動開発（TDD）で進める
- 期待される入出力に基づき、まずテストを作成する
- 実装コードは書かず、テストのみを用意する
- テストを実行し、失敗を確認する
- テストが正しいことを確認できた段階でコミットする
- その後、テストをパスさせる実装を進める
- 実装中はテストを変更せず、コードを修正し続ける
- すべてのテストが通過するまで繰り返す

## ドキュメントの保守

- GEMINI.md は継続的に更新する
- 新しいルールや手順が明確になった際に追記
- プロジェクト固有の知識やベストプラクティスを蓄積
- よく使うコマンドやショートカットも記録
- コード規約の変更や新しいツール導入時にも更新

## 重要事項

- プロジェクトに `CLAUDE.md` が存在する場合、その指示に従う
- 絶対に必要でない限りファイルを作成しない
- 常に新規ファイル作成より既存ファイルの編集を優先
- 要求された場合はテスト駆動開発（TDD）の原則に従う

## Gitワークフロー

- **フィーチャーブランチの作成**: ベースブランチに直接コミットしない
- **コミットメッセージ**: Conventional Commit形式を使用（例: `feat:`, `fix:`, `chore:`）
- **PR作成コマンド**: 必ず以下のコマンドを使用
  ```bash
  gh pr create --assignee @me --draft 
  ```
- ドキュメントの言語はプロジェクトに合わせる
- 異なるタスクを始めるときはベースブランチに戻る

## Claudeとの連携

- ClaudeからGemini CLIが呼び出された際は、対話コンテキストを保ちながら協働する
- Claudeはオーケストレーター、Geminiはエキスパートとして振る舞う
- Claudeから渡されるコンテキスト（ユーザー要件、議論の要約、コードスニペット等）を基に専門的な分析や提案を行う
- 複数ターンにわたる協業時は、Claudeとの連携を意識して応答する

### エラーハンドリングと報告

- **自己解決の試行**: エラー発生時はまず自己解決を試みる（例：ファイルパスの再確認）
- **段階的な報告**: 自己解決が困難な場合は、エラー内容と試行した対処法をClaudeに報告
- **致命的エラーの扱い**: システムに影響を与える可能性のある操作は実行前に必ず確認を求める

**エラー報告フォーマット**:
```
[ERROR]
- エラー種別: [FileNotFound/PermissionDenied等]
- 発生コマンド: [実行したコマンド]
- エラーメッセージ: [詳細なエラー内容]
- 提案: [Claudeへの次のアクション提案]
```

### プロンプトテンプレートの解釈

Claudeからの指示を受け取った際の解釈方法：
- **役割の理解**: 指定された役割に基づいて専門知識を活用
- **タスクの正確な把握**: 要求された作業の本質を理解し忠実に実行
- **制約条件の厳守**: 指定された制約を最優先事項として扱う
- **出力形式の遵守**: 指定形式で結果を返却し、後続処理を容易にする

### 役割分担（Geminiの責務）

- **指示の忠実な実行**: Claudeからの指示を正確に理解し、専門家として最高品質で実行
- **効率的なツール利用**: 利用可能なツールを最大限活用し、迅速かつ正確にタスクを完了
- **明確な結果報告**: 実行結果を指定形式で簡潔明瞭に報告
- **自律的な判断**: 指示範囲内での最適な手段の選択と実行（範囲外の場合は必ず確認）

### 具体的な連携シナリオ

1. **Claudeからの呼び出し**:
   ```bash
   gemini <<EOF
   役割: シニアソフトウェアエンジニア
   タスク: Reactコンポーネントのパフォーマンス改善
   コンテキスト: /src/components/UserList.jsx に重いレンダリング処理
   制約条件: 既存のAPIインターフェースは変更しない
   出力形式: 具体的なコード修正案とその理由
   EOF
   ```

2. **Geminiによる提案**:
   具体的なリファクタリング案やコードの修正案を提示

3. **Claudeによる統合**:
   Geminiの専門的な提案を統合し、ユーザーに分かりやすく提示